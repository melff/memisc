<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function codeplan() creates a data frame that
  describes the structure of an item list (a data.set object or
  an importer object), so that this structure can be stored and
  and recovered. The resulting data frame has a particular print method
  that delimits the output to one line per variable.
With setCodeplan an item list structure (as returned by codeplan())
  can be applied to a data frame or data set. It is also possible to use an
  assignment like codeplan(x) &amp;lt;- value to a similar effect."><title>Describe structure of Data Sets and Importers — codeplan • memisc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Describe structure of Data Sets and Importers — codeplan"><meta property="og:description" content="The function codeplan() creates a data frame that
  describes the structure of an item list (a data.set object or
  an importer object), so that this structure can be stored and
  and recovered. The resulting data frame has a particular print method
  that delimits the output to one line per variable.
With setCodeplan an item list structure (as returned by codeplan())
  can be applied to a data frame or data set. It is also possible to use an
  assignment like codeplan(x) &amp;lt;- value to a similar effect."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">memisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.31.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Survey items</h6>
    <a class="dropdown-item" href="../articles/items.html">Handling questionnaire items with 'memisc'</a>
    <a class="dropdown-item" href="../articles/import.html">Generating Tables of Descriptive Statistics with "memisc"</a>
    <a class="dropdown-item" href="../articles/anes48.html">Analysing the American National Election Study of 1948 with 'memisc'</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Tables of summary statistics and model estimates</h6>
    <a class="dropdown-item" href="../articles/gentab.html">Importing data from SPSS and Stata</a>
    <a class="dropdown-item" href="../articles/ftable-matrix.html">Combining flattened contingency tables (and other tables)</a>
    <a class="dropdown-item" href="../articles/mtable-html.html">A demonstration of showing 'mtable' results in HTML format</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/melff/memisc/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Describe structure of Data Sets and Importers</h1>
      
      <div class="d-none name"><code>codeplan.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function <code>codeplan()</code> creates a data frame that
  describes the structure of an item list (a <code>data.set</code> object or
  an <code>importer</code> object), so that this structure can be stored and
  and recovered. The resulting data frame has a particular print method
  that delimits the output to one line per variable.</p>
<p>With <code>setCodeplan</code> an item list structure (as returned by <code>codeplan()</code>)
  can be applied to a data frame or data set. It is also possible to use an
  assignment like <code>codeplan(x) &lt;- value</code> to a similar effect.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co"># S4 method for item.list</span></span>
<span><span class="fu">codeplan</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co"># S4 method for item</span></span>
<span><span class="fu">codeplan</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for data.frame,codeplan</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for data.frame,NULL</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for data.set,codeplan</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for data.set,NULL</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for item,codeplan</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for item,NULL</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for atomic,codeplan</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="co"># S4 method for atomic,NULL</span></span>
<span><span class="fu">setCodeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">value</span><span class="op">)</span></span>
<span><span class="fu">codeplan</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span><span class="fu">read_codeplan</span><span class="op">(</span><span class="va">filename</span>,<span class="va">type</span><span class="op">)</span></span>
<span><span class="fu">write_codeplan</span><span class="op">(</span><span class="va">x</span>,<span class="va">filename</span>,<span class="va">type</span>,<span class="va">pretty</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>for <code>codeplan(x)</code> an object that inherits from class <code>"item.list"</code>,
    i.e. can be a <code>"data.set"</code> object or an <code>"importer"</code>
  object, it can also be an object that inherits from class
  <code>"item"</code>.
   For <code>write_codeplan</code> an object from class <code>"codeplan"</code>.</p></dd>

  <dt>value</dt>
<dd><p>an object as it would be returned by <code>codeplan(x)</code>
    or <code>NULL</code>.</p></dd>

  <dt>filename</dt>
<dd><p>a character string, the name of the file that is to be
                  read or to be written.</p></dd>

  <dt>type</dt>
<dd><p>a character string (either "yaml" or "json") oder NULL (the default), gives the type
              of the file into which the codeplan is written or from
              which it is read.
              If <code>type</code> is NULL then the file type is inferred from
              the file name ending (".yaml" or ",yml" for "yaml",
              ".json" for "json").</p></dd>

  <dt>pretty</dt>
<dd><p>a logical value, whether the JSON output created by <code>write_codeplan(...)</code> should be prettified.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If applicable, <code>codeplan</code> returns a list with
  additional S3 class attribute <code>"codeplan"</code>. For arguments for
  which the relevant information does not exist, the function returns <code>NULL</code>.</p>


<p>The list has at least one element or several elements, named after the
  variable in the "item.list" or "data.set" <code>x</code>. Each list element
  is a list itself with the following elements:</p>
<dl><dt><code>annotation</code></dt>
<dd><p>a named character vector,</p></dd>

  <dt><code>labels</code></dt>
<dd><p>a named list of labels and labelled values</p></dd>

  <dt><code>value.filter</code></dt>
<dd><p>a list with at least two elements named
      "class" and "filter", and optionally another element named
      "range". The "class" element determines the class of the
      value filter and equals either "missing.values", "valid.values",
      or "valid.range". An element named "range" may only be needed
      if "class" is "missing.values", as it is possible (like in SPSS)
      to have <em>both</em> individual missing values and a range of
      missing values.</p></dd>

  <dt><code>mode</code></dt>
<dd><p>a character string that describes storage mode, such as <code>"character"</code>,
        <code>"integer"</code>, or <code>"numeric"</code>.</p></dd>

  <dt><code>measurement</code></dt>
<dd><p>a character string with the measurement level,
        <code>"nominal"</code>, <code>"ordinal"</code>, <code>"interval"</code>, or
        <code>"ratio"</code>.</p></dd>

      
</dl><p>If <code>codeplan(x)&lt;-value</code> or <code>setCodeplan(x,value)</code> is used
  and <code>value</code> is <code>NULL</code>, all the special information about
  annotation, labels, value filters, etc. is removed from the resulting
  object, which then is usually a mere atomic vector or data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">Data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="dataSets.html">data.set</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          vote <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">97</span>,<span class="fl">99</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">300</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fl">3</span>,<span class="fl">99</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">300</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">300</span>,sd<span class="op">=</span><span class="fl">.7</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">2000</span></span></span>
<span class="r-in"><span>          <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span><span class="va">Data1</span>,<span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="annotations.html">description</a></span><span class="op">(</span><span class="va">vote</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Vote intention"</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="annotations.html">description</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Region of residence"</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="annotations.html">description</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Household income"</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Foreach.html">foreach</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vote</span>,<span class="va">region</span><span class="op">)</span>,<span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="measurement.html">measurement</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"nominal"</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="measurement.html">measurement</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"ratio"</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="labels.html">labels</a></span><span class="op">(</span><span class="va">vote</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                    Conservatives         <span class="op">=</span>  <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                    Labour                <span class="op">=</span>  <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Liberal Democrats"</span>   <span class="op">=</span>  <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Don't know"</span>          <span class="op">=</span>  <span class="fl">8</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Answer refused"</span>      <span class="op">=</span>  <span class="fl">9</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Not applicable"</span>      <span class="op">=</span> <span class="fl">97</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Not asked in survey"</span> <span class="op">=</span> <span class="fl">99</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="labels.html">labels</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>                    England               <span class="op">=</span>  <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                    Scotland              <span class="op">=</span>  <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                    Wales                 <span class="op">=</span>  <span class="fl">3</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Not applicable"</span>      <span class="op">=</span> <span class="fl">97</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"Not asked in survey"</span> <span class="op">=</span> <span class="fl">99</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Foreach.html">foreach</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vote</span>,<span class="va">region</span>,<span class="va">income</span><span class="op">)</span>,<span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="annotations.html">annotation</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="st">"Remark"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"This is not a real survey item, of course ..."</span></span></span>
<span class="r-in"><span>    <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="value-filters.html">missing.values</a></span><span class="op">(</span><span class="va">vote</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">97</span>,<span class="fl">99</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="value-filters.html">missing.values</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">97</span>,<span class="fl">99</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cpData1</span> <span class="op">&lt;-</span> <span class="fu">codeplan</span><span class="op">(</span><span class="va">Data1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          vote <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">8</span>,<span class="fl">9</span>,<span class="fl">97</span>,<span class="fl">99</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">300</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>,<span class="fl">3</span>,<span class="fl">99</span><span class="op">)</span>,size<span class="op">=</span><span class="fl">300</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>          income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">300</span>,sd<span class="op">=</span><span class="fl">.7</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">2000</span></span></span>
<span class="r-in"><span>          <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">cpData1</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> vote:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Vote intention</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   labels:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Conservatives: 1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Labour: 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Liberal Democrats: 3.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Don't know: 8.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Answer refused: 9.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not applicable: 97.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not asked in survey: 99.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   value.filter:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     class: missing.values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     values:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 8.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 9.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 97.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 99.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Region of residence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   labels:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     England: 1.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Scotland: 2.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Wales: 3.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not applicable: 97.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not asked in survey: 99.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   value.filter:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     class: missing.values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     values:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 97.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 99.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Household income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="codebook.html">codebook</a></span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    vote 'Vote intention'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Storage mode: double</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Missing values: 8, 9, 97, 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Values and labels              N Valid Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1   'Conservatives'          44  33.6  14.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2   'Labour'                 41  31.3  13.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3   'Liberal Democrats'      46  35.1  15.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     8 M 'Don't know'             49        16.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     9 M 'Answer refused'         35        11.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    97 M 'Not applicable'         40        13.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    99 M 'Not asked in survey'    45        15.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Remark:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    region 'Region of residence'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Storage mode: double</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Missing values: 97, 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Values and labels              N Valid Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1   'England'               136  52.9  45.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2   'Scotland'               87  33.9  29.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3   'Wales'                  34  13.2  11.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    99 M 'Not asked in survey'    43        14.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Remark:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    income 'Household income'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Storage mode: double</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Measurement: ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min:   283.151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Max: 11966.387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Mean:  2546.424</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Std.Dev.:  1803.347</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Remark:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note the difference between 'as.data.frame' and setting</span></span></span>
<span class="r-in"><span><span class="co"># the codeplan to NULL:</span></span></span>
<span class="r-in"><span><span class="va">Data2df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	300 obs. of  3 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ vote  : num  99 99 1 8 2 9 1 3 97 9 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ region: num  1 99 3 99 1 1 2 1 99 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ income: num  2925 4453 5576 1919 919 ...</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Data2df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 'data.frame':	300 obs. of  3 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ vote  : Factor w/ 3 levels "Conservatives",..: NA NA 1 NA 2 NA 1 3 NA NA ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "label")= chr "Vote intention"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ region: Factor w/ 3 levels "England","Scotland",..: 1 NA 3 NA 1 1 2 1 NA 2 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "label")= chr "Region of residence"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ income: num  2925 4453 5576 1919 919 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "label")= chr "Household income"</span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Does not change anything</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Codeplans of survey items can also be inquired and manipulated:</span></span></span>
<span class="r-in"><span><span class="va">vote</span> <span class="op">&lt;-</span> <span class="va">Data1</span><span class="op">$</span><span class="va">vote</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">vote</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Nmnl. item w/ 7 labels for 1,2,3,... + ms.v.  num [1:300] 97 97 1 3 97 99 2 3 9 1 ...</span>
<span class="r-in"><span><span class="va">cp.vote</span> <span class="op">&lt;-</span> <span class="fu">codeplan</span><span class="op">(</span><span class="va">vote</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">vote</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">vote</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  num [1:300] 97 97 1 3 97 99 2 3 9 1 ...</span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">vote</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">cp.vote</span></span></span>
<span class="r-in"><span><span class="va">vote</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Item 'Vote intention' (measurement: nominal, type: double, length = 300) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1:300] *Not applicable *Not applicable Conservatives Liberal Democrats ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn.json</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">".json"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">write_codeplan</span><span class="op">(</span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data1</span><span class="op">)</span>,filename<span class="op">=</span><span class="va">fn.json</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">read_codeplan</span><span class="op">(</span><span class="va">fn.json</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">codeplan</span><span class="op">(</span><span class="va">Data2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> vote:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Vote intention</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   labels:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Conservatives: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Labour: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Liberal Democrats: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Don't know: 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Answer refused: 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not applicable: 97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not asked in survey: 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   value.filter:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     class: missing.values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     values:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> region:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Region of residence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   labels:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     England: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Scotland: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Wales: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not applicable: 97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Not asked in survey: 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   value.filter:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     class: missing.values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     values:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     - 99</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: nominal</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> income:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   annotation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     description: Household income</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Remark: This is not a real survey item, of course ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   mode: numeric</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measurement: ratio</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Elff.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

